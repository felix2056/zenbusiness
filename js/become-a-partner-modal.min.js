"use strict";document.addEventListener("DOMContentLoaded",function(e){if(!document.getElementById("zb-modal")){let e=document.createElement("div"),t=(e.className="zb-modal hidden",e.id="zb-modal",document.body.appendChild(e),document.createElement("div")),n=(t.className="inner-panel",e.appendChild(t),document.createElement("div")),a=(n.className="close-button-container",document.createElement("img")),r=(a.src="https://res.cloudinary.com/zenbusiness/q_auto/v1/shared-assets/icon/micro/close-x.svg",a.className="close-button",n.appendChild(a),t.appendChild(n),a.addEventListener("click",()=>{let e=a.closest(".zb-modal");e.classList.add("hidden")}),document.createElement("div")),o=(t.appendChild(r),document.createElement("h1")),l=(o.innerHTML="Apply to become a Partner",o.className="txt-title-hg",r.appendChild(o),document.createElement("h1")),i=(l.innerHTML="Provide your community with special offers and resources on how to start, run, and grow a business.",l.className="txt-body-md",r.appendChild(l),document.createElement("form")),s=(i.id="zb-modal-form","production"===wpEnv[0]?i.action="https://zenbusiness.my.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8":i.action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8",i.method="post",i.innerHTML=`
            <input type=hidden name="oid" id="oid" value="masked">
            <input type=hidden name="retURL" value="${document.location.origin+document.location.pathname+"?success=true"}">
            <input type=hidden name="lead_source" value="Partner">
            <input type=hidden name="company" id="company" value="UNKNOWN">
            <!--  ----------------------------------------------------------------------  -->
            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
            <!--  these lines if you wish to test in debug mode.                          -->
            <!--  <input type="hidden" name="debug" value=1>                              -->
            <!--  <input type="hidden" name="debugEmail"                                  -->
            <!--  value="neelima@zenbusiness.com">                                        -->
            <!--  ----------------------------------------------------------------------  -->
            <label for="first_name">First Name</label><input id="first_name" maxlength="40" name="first_name" size="20" type="text" /><br>
            <label for="last_name">Last Name</label><input id="last_name" maxlength="80" name="last_name" size="20" type="text" /><br>
            <label for="url">Website</label><input id="url" maxlength="80" name="url" size="20" type="text" /><br>
            <label for="email">Email</label><input id="email" maxlength="80" name="email" size="20" type="text" /><br>
            <label for="phone">Phone</label><input id="phone" maxlength="40" name="phone" size="20" type="text" /><br>
            <label for="description">Description</label><textarea name="description" id="description"></textarea><br>
        `,r.appendChild(i),document.createElement("div")),d=(s.className="agree-container",document.createElement("input")),m=(d.setAttribute("type","checkbox"),d.className="agree-checkbox",d.id="agreeCheckbox",s.appendChild(d),s.innerHTML+="<span>I agree to the  <a href='/partner-program-terms/'> Partner Program Terms of Service</a></span>",r.appendChild(s),document.createElement("div")),c=(m.id="error_message",m.className="error_message txt-body-md txt-bold",m.style.color="var(--c-energy-default)",r.appendChild(m),document.createElement("button")),u=(c.className="zb-button button-growth button-primary txt-button-lg",c.innerHTML="APPLY TODAY",r.appendChild(c),document.createElement("div")),p=(u.className="zb-modal-response hidden",t.appendChild(u),document.createElement("div")),b=(p.innerHTML="You're All set",p.className="txt-title-hg",u.appendChild(p),document.createElement("div")),h=(b.innerHTML="Our partner team will be in touch shortly after we review your information.",b.className="txt-body-md",u.appendChild(b),document.createElement("button"));h.className="zb-button button-focus button-primary txt-button-lg",h.innerHTML="RETURN TO PARTNERS PAGE",h.style.marginBottom="30px",h.style.marginTop="60px",u.appendChild(h),h.addEventListener("click",()=>{let e=a.closest(".zb-modal");e.classList.add("hidden")}),c.addEventListener("click",()=>{console.log("Start submit process");var e=document.querySelector(".zb-modal #email").value,t=document.querySelector(".zb-modal #first_name").value,n=document.querySelector(".zb-modal #last_name").value,a=document.querySelector(".zb-modal #phone").value,r=document.querySelector(".zb-modal #url").value,o=(document.querySelector(".zb-modal #description").value,document.querySelector(".zb-modal #agreeCheckbox").checked);document.querySelector(".zb-modal #error_message");if(m.innerHTML="",!(m.style.color="var(--c-energy-default)")===/^\w{1,99}([\.-]?\w{1,99}){0,99}(\+[a-z0-9-]{1,99})?@\w{1,99}([\.-]?\w{1,99}){0,99}(\.\w{2,10}){1,99}$/.test(String(e).toLowerCase()))m.innerHTML="Hmm... wrong email. Please try again.",e.length<2&&(m.innerHTML="Hmm... email is required.");else if(!1===/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,})/.test(String(r).toLowerCase()))m.innerHTML="Hmm... wrong website. Please try again.",r.length<2&&(m.innerHTML="Hmm... website is required.");else if(!1===/^(1\s?)?((\([0-9]{3}\))|[0-9]{3})[\s\-]?[\0-9]{3}[\s\-]?[0-9]{4}$/.test(String(a).toLowerCase()))m.innerHTML="Hmm... wrong phone number format. Please try again.",a.length<2&&(m.innerHTML="Hmm... phone number is required.");else if(t.length<1||n.length<1)m.innerHTML="Hmm... fill in your name. Please try again.";else if(o){m.innerHTML="Submitting, please wait.",m.style.color="var(--c-growth-40)";let n=new XMLHttpRequest;n.open("POST","/wp-admin/admin-ajax.php",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=()=>{var e=n.responseText;let t=new XMLHttpRequest;t.open("GET","/wp-json/zb-rest-api/v1/get-salesforce-oid",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("Authorization","Bearer "+e),t.onload=()=>{var e=t.responseText.replaceAll('"',"");document.querySelector(".zb-modal #oid").value=e,i.submit()},t.send()},n.send("action=fetch_zenwra_token")}else m.innerHTML="Hmm... You have to agree Terms to continue."}),"true"===zb.getQueryParams().params.success&&(r.classList.add("hidden"),u.classList.remove("hidden"),g())}function g(){document.getElementById("zb-modal").classList.remove("hidden")}var t;for(t of Array.from(document.getElementsByTagName("a")).filter(e=>e.innerHTML.toUpperCase().includes("BECOME A PARTNER")))t.innerHTML.toUpperCase().includes("BECOME A PARTNER")&&(t.href="#BecomePartner",t.addEventListener("click",()=>{g()}))});
